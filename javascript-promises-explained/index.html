<!DOCTYPE html>
<html lang="en">
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0"/>
  <title>Ed Zynda - Coder, Hacker, Superhero</title>

  
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="/css/materialize.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link href="/css/style.css" type="text/css" rel="stylesheet" media="screen,projection"/>
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/styles/agate.min.css">
</head>
<body>
  <nav class="red accent-3" role="navigation">
    <div class="nav-wrapper container">
      <a href="/" class="brand-logo">edzynda.com</a>
      <ul id="nav-mobile" class="right hide-on-med-and-down">
        <li><a href="/">Home</a></li>
        <li><a href="https://leanpub.com/u/anonymous0KWqBbeC1178r-jrlQOcux">Books</a></li>
      </ul>
    </div>
  </nav>
  <div class="parallax-container">
    <br>
    <br>
    <br>
    <br>
    <h1 class="header center white-text text-lighten-2">Ed Zynda</h1>
    <h3 class="header center white-text text-lighten-2">Coder | Hacker | Superhero</h3>
    <br>
    <ul class=" header center share-buttons">
      <li><a href="//twitter.com/edzynda" class="icon-twitter white-text" target="_blank" title="Twitter"></li>
      <li><a href="//github.com/ezynda3" class="icon-github white-text" target="_bank" title="Github"></li>
      <li><a href="//instagram.com/yungzee83" class="icon-instagram white-text" target="_blank" title="Instagram"></li>
    </ul>
    <div class="parallax"><img src="/images/parallax.png"></div>
  </div>


<div class="section white container">
  <div class="row">
    <div class="col s8">
      
  
  <h2><a href="http://edzynda.com/javascript-promises-explained/" title="Javascript Promises Explained">Javascript Promises Explained</a></h2>

  Posted on
  <time datetime="Nov 11, 2013">November 11, 2013</time>
  
    &middot; Tagged in
        
        <div class="chip"><a href="http://edzynda.com/tags/callback">callback</a></div>
        
        <div class="chip"><a href="http://edzynda.com/tags/deferred">deferred</a></div>
        
        <div class="chip"><a href="http://edzynda.com/tags/javascript">javascript</a></div>
        
        <div class="chip"><a href="http://edzynda.com/tags/jquery">jquery</a></div>
        
        <div class="chip"><a href="http://edzynda.com/tags/promises">promises</a></div>
        
    
  

      <p>While reading about different Javascript frameworks and utilities, I kept running across a design patter or technique called &lsquo;promises&rsquo;. It seems every shiny new Javascript thing utilizes them in some way or another. At first the concept seemed difficult to wrap my head around but eventually it clicked. It isn&rsquo;t really as difficult as I thought.</p>

<p>Javascript as well as other modern languages uses a what are called callback functions. These are functions passed as arguments to other functions and are used to do something with the data that the top level function returns. You can pass a function name as the parameter like in this jquery example.</p>

<pre><code class="language-javascript">$( &quot;#target&quot; ).submit(myCallback);

myCallback = function ( event ) {  
    alert( &quot;Handler for .submit() called.&quot; );  
    event.preventDefault();  
});  
</code></pre>

<p>Or you can use an anonymous function.</p>

<pre><code class="language-javascript">$( &quot;#target&quot; ).submit(function( event ) {  
    alert( &quot;Handler for .submit() called.&quot; );  
    event.preventDefault();  
});  
</code></pre>

<p>This is all fine and dandy. A problem arises though when you start using various functions or features in Javascript that run asynchronously. That means they don&rsquo;t run in sequence but run concurrently with other functions. Take this small example.</p>

<pre><code class="language-javascript">setTimeout(function() {  
    // do some stuff  
    var myVar = 'Some value';  
}, 2000);

console.log(myVar);  
</code></pre>

<p>What happens when you run it? Well the setTimeout function takes a function as the first argument and a time in milliseconds as the second. The function passed as the first argument will then execute in the time you passed in the second. setTimeout itself is executed immediately though and then console.log right after that. Because of this myVar doesn&rsquo;t actually contain a value and you get an error. Two seconds later myVar is assigned &lsquo;Some value&rsquo; but then it&rsquo;s too late. How do we access myVar only once our function has run? Well you can do this.</p>

<pre><code class="language-javascript">setTimeout(function() {  
    // do some stuff  
    var myVar = 'Some value';  
    console.log(myVar);  
}, 2000);  
</code></pre>

<p>By placing console.log inside our anonymous function we tell it only to execute when our function executes. Great! But this presents a problem. If you are writing a large application, it&rsquo;s possible you are going to have more than one function called within a function. You might even have multiple callbacks with even more nested functions. This can get messy. To solve this problem, members of the Javascript community came up with the idea of <a href="http://wiki.commonjs.org/wiki/Promises/A" title="Promises/A Specification" target="_blank">promises</a>.</p>

<p>Promises are a specification only and it is left up to developers to implement it. JQuery has it&rsquo;s own implementation of promises. A promise is just an object. This object is returned by a function instead of an actual value. It&rsquo;s basically an IOU for any other part of your script saying it will give you an actual value when it&rsquo;s done doing what it&rsquo;s doing.</p>

<p>JQuery uses what it calls a &lsquo;deferred&rsquo; object. A deferred has a resolve message that is run once your promise is fulfilled. It also has a reject method that is run if an error or something occurs. Take a look at this example.</p>

<pre><code class="language-javascript">var myFunc = function() {  
    var deferred = new $.Deferred();  
    setTimeout(function() {  
        // do some stuff  
        var myVar = 'Some value';  
        deferred.resolve();  
    }, 2000);  
    return deferred.promise();  
};

myFunc().done(function() {  
    console.log('Finished: ' + myVar);  
});  
</code></pre>

<p>We&rsquo;ve wrapped everything in a function called myFunc and created a new Deferred object. Our return value is a promise which belongs to Deferred. Now we can take that returned promise and use a method called &lsquo;done&rsquo;. &lsquo;done&rsquo; is only executed when the Deferred object is resolved or when the &lsquo;resolve&rsquo; method is called. There are two more methods called &lsquo;fail&rsquo; and &lsquo;always&rsquo;. Fail is executed when the &lsquo;reject&rsquo; method is called. You can probably guess when the &lsquo;always&rsquo; method is executed. There is a fourth method called &lsquo;then&rsquo; which takes three functions as arguments. These functions would be the same that you would use for &lsquo;done&rsquo;, &lsquo;fail&rsquo; and &lsquo;always&rsquo; in that order.</p>

<p>That&rsquo;s only the basics of what you can do with promises but even that is pretty powerful.</p>

      <ul class="share-buttons">
    <li>Share this article:</li>
    <li>
        <a class="icon-facebook-squared" href="https://www.facebook.com/sharer/sharer.php?u=http%3a%2f%2fedzynda.com%2fjavascript-promises-explained%2f" onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook"></a>
    </li>
    <li>
        <a class="icon-twitter" href="https://twitter.com/share?text=Javascript%20Promises%20Explained&amp;url=http%3a%2f%2fedzynda.com%2fjavascript-promises-explained%2f" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Tweet this article"></a>
    </li>
    <li>
        <a class="icon-gplus" href="https://plus.google.com/share?url=http%3a%2f%2fedzynda.com%2fjavascript-promises-explained%2f" onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title="Share on Google&#43;"></a>
    </li>
    <li>
        <a class="icon-linkedin" href="https://www.linkedin.com/shareArticle?mini=true&url=http%3a%2f%2fedzynda.com%2fjavascript-promises-explained%2f&title=Javascript%20Promises%20Explained" onclick="window.open(this.href, 'linkedin-share', 'width=600,height=494');return false;" title="Share on Linkedin"></a>
    </li>
</ul>

      <h3>Comments</h3>
      <div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'edzynda';
    var disqus_identifier = 'http:\/\/edzynda.com\/javascript-promises-explained\/';
    var disqus_title = 'Javascript Promises Explained';
    var disqus_url = 'http:\/\/edzynda.com\/javascript-promises-explained\/';

    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    </div>
    <div class="col s2 offset-l2">
      <iframe width="100%" height="400" src="https://leanpub.com/aopinphp/embed" frameborder="0" allowtransparency="true"></iframe>
    </div>
  </div>
</div>

<footer class="page-footer red accent-3">
    <div class="container">
      <div class="row">
        <div class="col l6 s12">
          <div class="row valign-wrapper">
            <div class="col s4">
              <img src="http://www.gravatar.com/avatar/6f0ca2846bbe006ad4bc12a583387c6a.png?size=200" class="circle responsive-img">
            </div>
            <div class="col s8">
              <h5 class="white-text">About Me</h5>
              <p class="grey-text text-lighten-4">
                I’m a nine year Air Force veteran and web software engineer with a passion for what makes the Internet tick. I code, I travel, I eat and I'm hungry for more!
              </p>
            </div>
          </div>
        </div>
        <div class="col l3 s12 offset-l3">
          <h5 class="white-text">Connect</h5>
          <ul class="share-buttons">
            <li><a href="//twitter.com/edzynda" class="icon-twitter white-text" target="_blank" title="Twitter"></a></li>
            <li><a href="//github.com/ezynda3" class="icon-github white-text" target="_blank" title="Github"></a></li>
            <li><a href="//instagram.com/yungzee83" class="icon-instagram white-text" target="_blank" title="Instagram"></a></li>
          </ul>
        </div>
      </div>
    </div>
    <div class="footer-copyright">
      <div class="container">
      © 2016 Ed Zynda
      </div>
    </div>
  </footer>


  
  <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.6.0/highlight.min.js"></script>
  <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
  <script src="/js/materialize.js"></script>
  <script src="/js/init.js"></script>

  </body>
</html>

